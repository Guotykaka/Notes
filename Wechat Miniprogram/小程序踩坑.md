# 小程序踩过的坑
## 1、siwper+scroll-view全屏展示
这种方式通常用来展示标签页下的列表，swiper组件必须给高度，用calc(100%-标签头部高度)无效，必须是一个固定的px或者rpx，因此要动态获取窗口的高度，可以在onLoad时，用以下方法获取

     wx.getSystemInfo({//获取系统信息，
        success: function (res) {
            that.setData({
                height:res.windowHeight//可使用窗口高度
            })
        }
    });
然后在wxml中

    <view class="tab">
        <view wx:for="{{signList}}" wx:key="{{index}}"
              bindtap="activeIndexTap"
              data-index="{{index}}"
              class="{{index===activeIndex? 'active':''}}"
        >{{item.name}}({{item.number}})</view>
    </view>
    <swiper class="tab-content" bindchange="changeTab" current="{{activeIndex}}" style="height:calc({{height}}px - 82rpx)">
        <swiper-item wx:for="{{signList}}" wx:for-index="indexMap" wx:for-item="itemMap" wx:key="{{indexMap}}">
            <scroll-view
                    style="height:calc({{height}}px - 82rpx)"
                    scroll-y="true"
                    scroll-with-animation="true" class="signList">
                <view wx:for="{{itemMap.list}}" wx:key="{{index}}" class="signItem">
                    <view class="left">
                        <image src="{{item.avatar}}"></image>
                        <text>{{item.name}}</text>
                    </view>
                    <text class="time">{{item.time}}</text>
                </view>
            </scroll-view>
        </swiper-item>
    </swiper>
注意内部的item在高度上不能有margin，会直接给外层增加高度，导致无论外层高度改成多小都会产生滚动条，要改成padding。
      
## 2、数据的访问与设置
比如一个属性object，底下有个name，想访问要this.data.object.name，想修改可以this.setData({'object.name':'jack'});  
如果直接是个字符串，修改就直接this.setData({name:'jack'})

## 3、wxss中不能用本地图片资源
比如要用背景图片就不行，只能用image标签或者使用网络文件

## 4、模板有自己的作用域
在wxml模板中，访问的变量都只能是传入的data中的数据以及模板定义文件中定义的 <wxs /> 模块。

## 5、setData动态修改值
即将属性名赋值给变量，来动态修改属性值。

     let key = value+".time";//value即属性名
     this.setData({
          [key]:e.detail//key是变量时，要加中括号
     })

## 6、输入框的value不是绑定
value属性只是初始值，并且如果设置为空，会被清空（可以用来做清空功能），但是如果要实时获取输入的值，value绑定的值不会实时自动赋值，必须写一个input事件去手动赋值。相当不科学了！

## 7、无法在picker组件上使用display:flex

## 8、wx.showModal的回调
success是指该api调用成功，也就是说点确认或取消都会触发，点击了确认或取消要通过success的参数res，若res.confirm是true才是点了确定。

## 9、富文本解析
详情、文章等经常有图文详情，是在后台用文本编辑器编辑后生成的html代码，在小程序中的展示要用到插件wxParse，[参考](https://blog.csdn.net/joelingwei/article/details/73456889)

## 10、wxml中不能对数据操作
不能使用slice，parseFloat等方法，会导致数据不显示，所以只能在js中操作

## 11、button的自带边框用border:none无法去除
使用方法button:after{border:none}
